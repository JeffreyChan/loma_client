(function(){if(!String.prototype.format){String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,o){return typeof t[o]!="undefined"?t[o]:e})}}angular.module("underscore",[]);angular.module("underscore").factory("_",["$window",function(t){return t._}]);var t=angular.module("lomaApp",["underscore","ngRoute","ngSanitize","ui.bootstrap","ngMessages","ui-notification"]);function e(t,e,o,r){t.when("/",{templateUrl:"/tmp/home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/category-list",{templateUrl:"/tmp/category/category.view.html",controller:"categoryCtrl",controllerAs:"vm"}).when("/sya",{template:"<h1>hell</h1>"}).when("/register",{template:"<h1>hell</h1>"}).when("/login",{template:"<h1>hell</h1>"}).otherwise({redirectTo:"/"});e.html5Mode(true);r.setOptions({delay:3e3,startTop:20,startRight:10,verticalSpacing:20,horizontalSpacing:20,positionX:"center",positionY:"top"})}t.config(["$routeProvider","$locationProvider","$httpProvider","NotificationProvider",e])})();(function(){angular.module("lomaApp").controller("dashboradCtrl",t);t.$inject=["$scope"];function t(t){t.loadingView=true;console.log("hello DashBorad")}})();(function(){angular.module("lomaApp").controller("homeCtrl",t);t.$inject=["$scope"];function t(t){if(window.location.pathname!=="/"){window.location.href="/#"+window.location.pathname}var e=this;e.message="yes";console.log("hello world")}})();(function(){angular.module("lomaApp").controller("categoryCtrl",t);t.$inject=["$scope","$uibModal","commonService","popupService","categoryService","$timeout","Notification"];function t(t,e,o,r,n,a,i){var c=this;c.showNumEntries=[10,25,50,100];c.pageCount=c.showNumEntries[0];c.currentPage=1;c.totalItems=0;c.pageMaxSize=10;c.initCategoryList=function(t,e){n.getCategoryList(t,e).success(function(t){if(o.isEmptyOrNull(t.entity)){i.error({message:"No category found!",delay:5e3})}c.totalItems=t.entity.totalNum;c.catListData=t.entity.data||[];c.pageStart=(c.currentPage-1)*c.pageCount+1;var e=c.pageStart+c.pageCount-1;c.pageEnd=e<c.totalItems?e:c.totalItems}).error(function(t){i.error({message:"Sorry, something's gone wrong, please try again later",delay:5e3})})};t.$watch("vm.pageCount",function(){c.initCategoryList(c.currentPage,c.pageCount)});c.pageChanged=function(){c.initCategoryList(c.currentPage,c.pageCount)};c.delayInfo=function(e){t.$apply(function(){c.infoMessage=e})};c.popupremoveForm=function(t){var e={closeButtonText:"Cancel",okButtonText:"Confirm",headerText:"Delete Category",bodyText:"Are you sure you want to delete this category?",entityId:t};r.showModal({},e).then(function(t){n.removeCategory(e.entityId).success(function(t){a(function(){c.initCategoryList()},500);i.success("Delete category successfully")}).error(function(t){i.error({message:t.error,delay:5e3})})})};c.popupCreateOrUpdateForm=function(t){t=t||"";var e=_.find(c.catListData,function(e){return _.isEqual(e._id,t)})||{};var n={closeButtonText:"Cancel",okButtonText:"Sumbit",headerText:o.isEmptyOrNull(t)?"Create Category":"Update Category",bodyText:"",isCreateFlag:o.isEmptyOrNull(t)};var l={templateUrl:"tmp/category/updatecreate.view.html",controller:"catCreateOrUpdateCtrl",controllerAs:"vm",resolve:{modalData:function(){return{options:n,entity:{_id:e._id,name:e.name,desc:e.desc,parent:e.parent}}}}};r.showModal(l,n).then(function(t){var e=n.isCreateFlag?"Create Category done!":"Update Category done!";i.success(e);a(function(){c.initCategoryList(c.currentPage,c.pageCount)},500)})}}})();(function(){angular.module("lomaApp").controller("catCreateOrUpdateCtrl",t);t.$inject=["$scope","commonService","$uibModalInstance","modalData","categoryService","popupService"];function t(t,e,o,r,n,a){var i=this;i.catList=[];i.modalData=r;i.formData=i.modalData.entity||{};i.isCreateFlag=e.isEmptyOrNull(i.formData._id);i.formError="";n.getRootCategory().success(function(t){i.catList=t.entity;i.formData.parent=i.catList[0]._id}).error(function(t){i.formError="Sorry, something's gone wrong, please try again later"});i.modal={ok:function(t){o.close(t)},cancel:function(){o.dismiss("cancel")}};i.onSubmit=function(){if(i.isCreateFlag){i.doAddCategory(i.formData)}else{i.doUpdateCategory(i.formData)}};i.doUpdateCategory=function(t){n.updateCategory(t).success(function(t){i.modal.ok(t.entity)}).error(function(t){i.formError=t.error});return false};i.doAddCategory=function(t){n.createCategory(t).success(function(t){i.modal.ok(t.entity)}).error(function(t){i.formError=t.error});return false}}})();(function(){angular.module("lomaApp").service("categoryService",t);t.$inject=["$http"];function t(t){var e="http://localhost:2000";var o=function(o,r){o=o||1;r=r||10;return t.get("{0}/{1}?page={2}&size={3}".format(e,"api/category",o,r))};var r=function(){return t.get("{0}/{1}".format(e,"api/category/root"))};var n=function(o){return t.post("{0}/{1}".format(e,"api/category"),o,{headers:{"Content-Type":"application/json"}})};var a=function(o){return t.delete("{0}/{1}/{2}".format(e,"api/category",o))};var i=function(o){return t.put("{0}/{1}/{2}".format(e,"api/category",o._id),o,{headers:{"Content-Type":"application/json"}})};return{getCategoryList:o,getRootCategory:r,createCategory:n,removeCategory:a,updateCategory:i}}})();(function(){angular.module("lomaApp").service("popupService",["$uibModal",function(t){var e={animation:true,backdrop:true,keyboard:true,templateUrl:"/tmp/common/views/modal.view.html"};var o={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(t,e){t=t||{};t.backdrop="static";return this.show(t,e)};this.showDialog=function(o){o=o||{};o.backdrop="static";o.size="sm";o.templateUrl="/tmp/common/views/dialog.view.html";var r={};angular.extend(r,e,o);this.dialogInstance=t.open(r);return this.dialogInstance};this.closeDialog=function(){this.dialogInstance.dismiss("cancel")};this.show=function(r,n){var a={};var i={};angular.extend(a,e,r);angular.extend(i,o,n);if(!a.controller){c.$inject=["$scope","$uibModalInstance"];function c(t,e){t.modalOptions=i;t.modalOptions.ok=function(t){e.close(t)};t.modalOptions.close=function(){e.dismiss("cancel")}}a.controller=c}return t.open(a).result}}])})();(function(){angular.module("lomaApp").service("commonService",t);t.$inject=["_"];function t(t){var e=function(e){return t.isEmpty(e)||e===null||t.isUndefined(e)};return{isEmptyOrNull:e}}})();